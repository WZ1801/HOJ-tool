<!DOCTYPE html>
<html lang="zh-cn">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>自动刷题 - HOJ Tool</title>
    <link rel="stylesheet" href="/auto_solver/style.css">
    <link rel="stylesheet" href="/css/style.css" />
    <link rel="stylesheet" href="https://cdn.bootcdn.net/ajax/libs/bootstrap-icons/1.10.5/font/bootstrap-icons.min.css">
</head>

<body>

    <main class="container">
        <div class="auto-solver">
            <div class="solve-options">
                <div class="solve-section" id="singleProblemSection">
                    <h2><i class="bi bi-file-earmark-code"></i> 刷个题</h2>
                    <div class="form-group">
                        <label for="problemIds">题目ID（多个用英文逗号分隔）</label>
                        <div class="input-group">
                            <textarea id="problemIds" placeholder="例如: P1001,I1145"></textarea>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="problemNotes">额外提示（可选）</label>
                        <div class="input-group">
                            <textarea id="problemNotes" placeholder="给AI的额外提示信息..."></textarea>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="thresholdSlider">跳过阈值（未AC次数达到阈值时跳过该题）</label>
                        <div class="slider-container">
                            <input type="range" id="thresholdSlider" min="1" max="10" value="3" class="slider">
                            <span id="thresholdValue">3</span>
                            <button type="button" id="neverSkipBtn" class="button small" onclick="toggleNeverSkip()">从不跳过</button>
                        </div>
                    </div>
                    <div class="control-buttons">
                        <button class="button success" onclick="startProblemSolver()">
                            <i class="bi bi-play-fill"></i> 开始刷题
                        </button>
                    </div>
                </div>

                <div class="solve-section" id="trainingSection">
                    <h2><i class="bi bi-collection"></i> 刷训练题</h2>
                    <div class="form-group">
                        <label for="trainingIds">训练集ID（多个用英文逗号分隔）</label>
                        <div class="input-group">
                            <textarea id="trainingIds" placeholder="例如: 1,2,3"></textarea>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="trainingNotes">额外提示（可选）</label>
                        <div class="input-group">
                            <textarea id="trainingNotes" placeholder="给AI的额外提示信息..."></textarea>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="thresholdSliderTraining">跳过阈值（未AC次数达到阈值时跳过该题）</label>
                        <div class="slider-container">
                            <input type="range" id="thresholdSliderTraining" min="1" max="10" value="3" class="slider">
                            <span id="thresholdValueTraining">3</span>
                            <button type="button" id="neverSkipBtnTraining" class="button small" onclick="toggleNeverSkipTraining()">从不跳过</button>
                        </div>
                    </div>
                    <div class="control-buttons">
                        <button class="button success" onclick="startTrainingSolver()">
                            <i class="bi bi-play-fill"></i> 开始刷题
                        </button>
                    </div>
                </div>

                <div class="solve-section" id="allProblemSection">
                    <h2><i class="bi bi-stack"></i> 刷全部题</h2>
                    <div class="description">
                        <p>将自动刷取当前OJ平台上所有可用的题目。</p>
                        <div class="warning">
                            <i class="bi bi-exclamation-triangle"></i>
                            <span>请确保有充足的时间，该操作可能需要较长时间完成，甚至几天几夜……</span>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="thresholdSliderAll">跳过阈值（未AC次数达到阈值时跳过该题）</label>
                        <div class="slider-container">
                            <input type="range" id="thresholdSliderAll" min="1" max="10" value="3" class="slider">
                            <span id="thresholdValueAll">3</span>
                            <button type="button" id="neverSkipBtnAll" class="button small" onclick="toggleNeverSkipAll()">从不跳过</button>
                        </div>
                    </div>
                    <div class="control-buttons">
                        <button class="button success" onclick="startAllSolver()">
                            <i class="bi bi-play-fill"></i> 开始刷题
                        </button>
                    </div>
                </div>
            </div>

            <!-- 运行状态和日志 -->
            <div id="statusSection" class="status-section">
                <h2><i class="bi bi-info-circle"></i> 运行状态</h2>
                <div class="status-info">
                    <div class="status-item">
                        <span class="status-label">运行状态：</span>
                        <span id="runningStatus" class="status-value">未开始</span>
                    </div>
                    <div class="status-item">
                        <span class="status-label">AI登录：</span>
                        <span id="aiLoginStatus" class="status-value">未登录</span>
                    </div>
                </div>
                <div class="log-container" id="logContainer">
                    <div class="log-header">
                        <span>运行日志</span>
                        <button class="button" onclick="clearLog()">
                            <i class="bi bi-trash"></i> 清空日志
                        </button>
                    </div>
                    <div class="log-content"></div>
                </div>
                <div class="control-buttons">
                    <button class="button danger" onclick="stopSolver()" id="stopButton" disabled>
                        <i class="bi bi-stop-fill"></i> 停止运行
                    </button>
                </div>
                <div id="loginButtonContainer"></div>
            </div>
        </div>
    </main>

    <!-- 模态框 -->
    <div class="modal-overlay" id="modalOverlay">
        <div class="modal" id="modal">
            <div class="modal-icon">
                <i class="bi" id="modalIcon"></i>
            </div>
            <div class="modal-content" id="modalContent"></div>
            <div class="modal-actions">
                <button class="modal-button primary" onclick="closeModal()">确定</button>
            </div>
        </div>
    </div>

    <footer class="footer">
        <div class="container">
            <p>Copyright © 2024-2025 <a href="https://gitee.com/wzokee/hoj-tool" target="_blank">HOJ Tool</a>. 仅供学习研究使用</p>
        </div>
    </footer>

    <script src="/auto_solver/index.js"></script>
</body>

</html>